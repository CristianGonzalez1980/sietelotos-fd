{"ast":null,"code":"var _jsxFileName = \"/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/src/components/AdminPanel/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect, useState, useContext } from \"react\";\nimport '../../client/css/index.css';\nimport $ from 'jquery';\nimport { useHistory } from \"react-router-dom\";\nimport M from 'materialize-css'; // import MercadoPagoProducto from '../../components/MercadoPagoProducto';\n\nimport ShopContext from '../../components/context/shop-context';\nimport { precioTotal, sendMethodCostTopLevel, sendMethodNameTopLevel } from '../../components/ShoppingCart'; // document.addEventListener('DOMContentLoaded', function() {\n//   var elems = document.querySelectorAll('.autocomplete');\n//   M.Autocomplete.init(elems, {});\n// });\n\nconst TestForm = () => {\n  _s();\n\n  const history = useHistory(); //    //REPLACE WITH YOUR PUBLIC KEY AVAILABLE IN: https://developers.mercadopago.com/panel/credentials\n\n  window.Mercadopago.setPublishableKey(\"TEST-5429f1b7-5db8-46fd-bf95-26ae8fcd39fe\"); // window.Mercadopago.getIdentificationTypes();\n\n  const context = useContext(ShopContext);\n  const [quantity, setQuantity] = useState(1);\n  const [unitPrice] = useState(10);\n  const [amount] = useState(precioTotal(context.cart) + sendMethodCostTopLevel);\n  const [description] = useState(\"Some book\");\n  const [cardNumber, setCardNumber] = useState(\"\");\n  const [paymentmethod, setpaymentmethod] = useState(null);\n  const [paymentmethodId, setpaymentmethodId] = useState(null);\n  let installments = null;\n  const [paymentmethodThumbnail, setpaymentmethodThumbnail] = useState(\"\");\n  const [paymentmethodThumbnailStyle, setpaymentmethodThumbnailStyle] = useState({\n    backgroundImage: null\n  });\n  const [cartTotal, setCartTotal] = useState(\"$ 10\");\n  const [email, setEmail] = useState(\"\");\n  const [docTypes, setDocTypes] = useState([]); // const [token, setToken] = useState(null);\n  // const [docTypes, setDocTypes] = useState(null);\n  // useEffect(() => {\n  //   if(!docTypes){\n  //     fetch(\"https://api.mercadopago.com/v1/identification_types?public_key=TEST-147fd98d-a235-429b-aa09-a5b157a1fe61\", {\n  //       headers: {\n  //         \"Content-type\": \"application/json\",\n  //       }\n  //       }).then((res) => {\n  //         console.log(res)\n  //         if (res.ok) {\n  //           return res.json()\n  //         }\n  //       }).then((response)=>{\n  //         var hola = document.createElement(\"option\")\n  //       hola.text = \"hola\"\n  //       document.getElementById(\"docType\").add(hola)\n  //       var hola = document.createElement(\"option\")\n  //       hola.text = \"hola1\"\n  //       // document.getElementById(\"docType\").add(hola)\n  //         // console.log(\"gggfgfgfg\"+response)\n  //         setDocTypes(response)\n  //         console.log(docTypes)\n  //       }, [docTypes])\n  //   }\n  // })\n\n  function guessPaymentMethod(event) {\n    cleanCardInfo();\n    setCardNumber(event.target.value);\n    console.log(event.target.value);\n\n    if (event.target.value.length >= 6) {\n      let bin = event.target.value.substring(0, 6);\n      window.Mercadopago.getPaymentMethod({\n        \"bin\": bin\n      }, setPaymentMethod);\n    }\n  }\n\n  ;\n\n  function setPaymentMethod(status, response) {\n    if (status === 200) {\n      console.log(paymentmethodThumbnailStyle);\n      setpaymentmethod(response[0]);\n      setpaymentmethodId(response[0].id);\n      setpaymentmethodThumbnail('url(' + response[0].thumbnail + ')');\n      setpaymentmethodThumbnailStyle({\n        backgroundImage: 'url(' + response[0].thumbnail + ')'\n      });\n      console.log(paymentmethodThumbnailStyle);\n\n      if (response[0].additional_info_needed.includes(\"issuer_id\")) {\n        getIssuers(response[0].id);\n      } else {\n        document.getElementById('issuerInput').classList.add(\"hidden\");\n        getInstallments(response[0].id, document.getElementById('amount').value);\n      }\n    }\n  }\n\n  function getIssuers(paymentMethodId) {\n    window.Mercadopago.getIssuers(paymentMethodId, setIssuers);\n  }\n\n  function setIssuers(status, response) {\n    if (status === 200) {\n      let issuerSelect = document.getElementById('issuer');\n      response.forEach(issuer => {\n        let opt = document.createElement('option');\n        opt.text = issuer.name;\n        opt.value = issuer.id;\n        issuerSelect.appendChild(opt);\n      });\n\n      if (issuerSelect.options.length <= 1) {\n        document.getElementById('issuerInput').classList.add(\"hidden\");\n      } else {\n        document.getElementById('issuerInput').classList.remove(\"hidden\");\n      }\n\n      getInstallments(document.getElementById('paymentMethodId').value, document.getElementById('amount').value, issuerSelect.value);\n    } else {\n      alert(`issuers method info error: ${response}`);\n    }\n  }\n\n  function getInstallments(paymentMethodId, amount, issuerId) {\n    window.Mercadopago.getInstallments({\n      \"payment_method_id\": paymentMethodId,\n      \"amount\": parseFloat(amount),\n      \"issuer_id\": issuerId ? parseInt(issuerId) : undefined\n    }, setInstallments);\n  }\n\n  function setInstallments(status, response) {\n    if (status === 200) {\n      document.getElementById('installments').options.length = 0;\n      response[0].payer_costs.forEach(payerCost => {\n        let opt = document.createElement('option');\n        opt.text = payerCost.recommended_message;\n        opt.value = payerCost.installments;\n        document.getElementById('installments').appendChild(opt);\n      });\n    } else {// alert(`installments method info error: ${response}`);\n    }\n  } // //Update offered installments when issuer changes\n\n\n  function updateInstallmentsForIssuer(event) {\n    window.Mercadopago.getInstallments({\n      \"payment_method_id\": document.getElementById('paymentMethodId').value,\n      \"amount\": parseFloat(document.getElementById('amount').value),\n      \"issuer_id\": parseInt(document.getElementById('issuer').value)\n    }, setInstallments);\n  } // //Proceed with payment\n\n\n  var doSubmit = false;\n\n  function getCardToken(event) {\n    event.preventDefault();\n\n    if (!doSubmit) {\n      let $form = document.getElementById('paymentForm');\n      window.Mercadopago.createToken($form, setCardTokenAndPay);\n      return false;\n    }\n  }\n\n  ;\n  const updatePaymentMethodThumbnail = {\n    backgroundImage: paymentmethodThumbnail\n  };\n\n  function setCardTokenAndPay(status, response) {\n    if (status === 200 || status === 201) {\n      // let form = document.getElementById('paymentForm');\n      // let card = document.createElement('input');\n      // card.setAttribute('name', 'token');\n      // card.setAttribute('type', 'hidden');\n      // card.setAttribute('value', response.id);\n      // setToken(response.id)\n      // form.appendChild(card);\n      doSubmit = true; // form.submit(); //Submit form data to your backend\n\n      postearPago(response.id);\n    } else {\n      alert(\"Verify filled data!\\n\" + JSON.stringify(response, null, 4));\n    }\n  }\n\n  ;\n  /***\n   * UX functions \n   */\n\n  function cleanCardInfo() {\n    setpaymentmethodThumbnailStyle({\n      backgroundImage: \"\"\n    });\n    document.getElementById('issuerInput').classList.add(\"hidden\");\n    document.getElementById('issuer').options.length = 0;\n    document.getElementById('installments').options.length = 0;\n  } // //Handle transitions\n\n\n  function checkoutShoppingCart() {\n    $('.shopping-cart').fadeOut(500);\n    setTimeout(() => {\n      $('.container_payment').show(500).fadeIn();\n    }, 500);\n  }\n\n  function goBackContainerPayment() {\n    $('.container_payment').fadeOut(500);\n    setTimeout(() => {\n      $('.shopping-cart').show(500).fadeIn();\n    }, 500);\n  }\n\n  const postearPago = tokenString => {\n    if (cartTotal && unitPrice && email && description && amount && quantity) {\n      //cartTotal && unitPrice && email && description && amount && quantity && token){\n      fetch(\"https://exposicion-virtual.herokuapp.com/process_payment\", {\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          \"Authorization\": localStorage.getItem(\"tokenValido\")\n        },\n        body: JSON.stringify({\n          \"token\": tokenString,\n          \"unitPrice\": unitPrice,\n          \"email\": email,\n          \"description\": description,\n          \"amount\": precioTotal(context.cart) + sendMethodCostTopLevel,\n          \"quantity\": quantity,\n          \"paymentMethodId\": paymentmethodId,\n          \"installments\": document.getElementById(\"installments\").value,\n          \"issuerId\": document.getElementById(\"issuer\").value,\n          \"docType\": document.getElementById(\"docType\").value,\n          \"docNumber\": document.getElementById(\"docNumber\").value\n        })\n      }).then(res => {\n        console.log(res);\n\n        if (res.ok) {\n          return res.json();\n        } else {\n          M.toast({\n            html: \"Error inesperado\",\n            classes: \"#c62828 red darken-3\"\n          });\n          window.Mercadopago.clearSession();\n        }\n      }).then(data => {\n        if (data && (data.status_detail === \"accredited\" || data.status_detail === \"pending_contingency\" || data.status_detail === \"pending_review_manual\")) {\n          console.log(data.comunicacion_sugerida);\n          console.log(\"realizandoPAGO\");\n          M.toast({\n            html: data.comunicacion_sugerida,\n            classes: \"#388e3c green darken-2\"\n          });\n          actualizarBaseDeDatos();\n          vacioCarrito();\n        } else {\n          M.toast({\n            html: data.comunicacion_sugerida,\n            classes: \"#c62828 red darken-3\"\n          });\n        }\n\n        history.push(\"/\");\n        window.Mercadopago.clearSession();\n      }).catch(err => {\n        console.log(err);\n        window.Mercadopago.clearSession();\n      });\n    } else {\n      M.toast({\n        html: \"Llenar todos los campos\",\n        classes: \"#c62828 red darken-3\"\n      });\n    }\n  };\n\n  const actualizarBaseDeDatos = () => {\n    fetch(\"https://exposicion-virtual.herokuapp.com/productSales\", {\n      method: \"PUT\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"Authorization\": localStorage.getItem(\"tokenValido\")\n      },\n      body: JSON.stringify({\n        \"sales\": listaProductosEnPares()\n      })\n    }).then(res => {\n      console.log(res);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const listaProductosEnPares = () => {\n    let arrayResultado = [];\n    context.cart.forEach(product => {\n      console.log(\"Pase por (\" + product.id + \", \" + product.quantity + \")\");\n      arrayResultado.push({\n        \"idProducto\": product.id,\n        \"cantidadVendida\": product.quantity\n      });\n    });\n    console.log(arrayResultado);\n    return arrayResultado;\n  };\n\n  const vacioCarrito = () => {\n    context.cart.forEach(product => {\n      context.deleteProductFromCart(product.id);\n    });\n  };\n\n  const selectDocTypes = () => {\n    if (docTypes.length === 0) {\n      fetch(\"https://api.mercadopago.com/v1/identification_types?public_key=TEST-147fd98d-a235-429b-aa09-a5b157a1fe61\", {\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      }).then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n      }).then(response => {\n        setDocTypes(response);\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"select\", {\n      id: \"docType\",\n      name: \"docType\",\n      \"data-checkout\": \"docType\",\n      class: \"form-control select-visible\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 13\n      }\n    }, docTypes.map(opt => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        value: opt.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 17\n        }\n      }, opt.name);\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 5\n    }\n  }, checkoutShoppingCart(), /*#__PURE__*/React.createElement(\"section\", {\n    class: \"payment-form dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"container_payment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"block-heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }\n  }, \"Pago con tarjeta\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-payment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    class: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 15\n    }\n  }, \"Resumen\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"price\",\n    id: \"summary-price\",\n    value: '$ ' + unitPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 17\n    }\n  }), context.cart.map(product => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      class: \"item-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 25\n      }\n    }, product.itemName, \" \", /*#__PURE__*/React.createElement(\"span\", {\n      id: \"summary-quantity\",\n      value: quantity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 65\n      }\n    }, \"x \", product.quantity))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      class: \"item-name item-total-price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 25\n      }\n    }, \"$ \", product.itemPrice * product.quantity)));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col s6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    class: \"item-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 21\n    }\n  }, sendMethodNameTopLevel, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    id: \"summary-quantity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 67\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col s6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    class: \"item-name item-total-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 21\n    }\n  }, \"$ \", sendMethodCostTopLevel)))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 15\n    }\n  }, \"Total\", /*#__PURE__*/React.createElement(\"span\", {\n    class: \"price\",\n    id: \"summary-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 39\n    }\n  }, \"$ \", precioTotal(context.cart) + sendMethodCostTopLevel))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"payment-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    action: \"#\",\n    id: \"paymentForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    class: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 17\n    }\n  }, \"Datos del comprador\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-sm-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 21\n    }\n  }, \"E-Mail\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"email\",\n    name: \"email\",\n    type: \"text\",\n    class: \"form-control\",\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-sm-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"docType\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 21\n    }\n  }, \"Tipo de documento\"), selectDocTypes()), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-sm-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"docNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 21\n    }\n  }, \"Numero de documento\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"docNumber\",\n    name: \"docNumber\",\n    \"data-checkout\": \"docNumber\",\n    type: \"text\",\n    class: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    class: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 17\n    }\n  }, \"Datos de la tarjeta\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"cardholderName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 21\n    }\n  }, \"Titular de la tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"cardholderName\",\n    \"data-checkout\": \"cardholderName\",\n    type: \"text\",\n    class: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col s12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 21\n    }\n  }, \"Fecha de vencimiento\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"input-group expiration-date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    placeholder: \"MM\",\n    id: \"cardExpirationMonth\",\n    \"data-checkout\": \"cardExpirationMonth\",\n    onselectstart: \"return false\",\n    onpaste: \"return false\",\n    onCopy: \"return false\",\n    onCut: \"return false\",\n    onDrag: \"return false\",\n    onDrop: \"return false\",\n    autocomplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    class: \"date-separator\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 23\n    }\n  }, \"/\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    placeholder: \"YY\",\n    id: \"cardExpirationYear\",\n    \"data-checkout\": \"cardExpirationYear\",\n    onselectstart: \"return false\",\n    onpaste: \"return false\",\n    onCopy: \"return false\",\n    onCut: \"return false\",\n    onDrag: \"return false\",\n    onDrop: \"return false\",\n    autocomplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"cardNumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 21\n    }\n  }, \"N\\xFAmero de tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control input-background\",\n    id: \"cardNumber\",\n    \"data-checkout\": \"cardNumber\",\n    onselectstart: \"return false\",\n    onpaste: \"return false\",\n    onCopy: \"return false\",\n    onCut: \"return false\",\n    onDrag: \"return false\",\n    onDrop: \"return false\",\n    style: paymentmethodThumbnailStyle,\n    autocomplete: \"off\",\n    onChange: guessPaymentMethod,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-sm-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"securityCode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 21\n    }\n  }, \"C\\xF3digo de seguridad\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"securityCode\",\n    \"data-checkout\": \"securityCode\",\n    type: \"text\",\n    class: \"form-control\",\n    onselectstart: \"return false\",\n    onpaste: \"return false\",\n    onCopy: \"return false\",\n    onCut: \"return false\",\n    onDrag: \"return false\",\n    onDrop: \"return false\",\n    autocomplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"issuerInput\",\n    class: \"form-group col-sm-12 hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"issuer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 21\n    }\n  }, \"Entidad emisora\"), /*#__PURE__*/React.createElement(\"select\", {\n    id: \"issuer\",\n    name: \"issuer\",\n    \"data-checkout\": \"issuer\",\n    class: \"form-control select-visible\",\n    onChange: updateInstallmentsForIssuer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-sm-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"installments\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 21\n    }\n  }, \"Cuotas\"), /*#__PURE__*/React.createElement(\"select\", {\n    type: \"text\",\n    id: \"installments\",\n    name: \"installments\",\n    class: \"form-control select-visible\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group col-sm-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"transactionAmount\",\n    id: \"amount\",\n    value: amount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"paymentMethodId\",\n    id: \"paymentMethodId\",\n    value: paymentmethodId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"description\",\n    id: \"description\",\n    value: description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col s12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: getCardToken,\n    className: \"waves-effect waves-light red lighten-2 btn-large\",\n    id: \"butonSubmit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 25\n    }\n  }, \"Pagar\"))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"a\", {\n    id: \"go-back\",\n    href: \"/shoppingcart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"12\",\n    height: \"12\",\n    viewBox: \"0 0 10 10\",\n    class: \"chevron-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#009EE3\",\n    \"fill-rule\": \"nonzero\",\n    id: \"chevron_left\",\n    d: \"M7.05 1.4L6.2.552 1.756 4.997l4.449 4.448.849-.848-3.6-3.6z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 25\n    }\n  })), \"Volver al carrito\")))))))));\n};\n\n_s(TestForm, \"ZJdV4rRTjKypclOoFDII3Ym0qLc=\", false, function () {\n  return [useHistory];\n});\n\n_c = TestForm;\nexport default TestForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"TestForm\");","map":{"version":3,"sources":["/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/src/components/AdminPanel/index.js"],"names":["React","useEffect","useState","useContext","$","useHistory","M","ShopContext","precioTotal","sendMethodCostTopLevel","sendMethodNameTopLevel","TestForm","history","window","Mercadopago","setPublishableKey","context","quantity","setQuantity","unitPrice","amount","cart","description","cardNumber","setCardNumber","paymentmethod","setpaymentmethod","paymentmethodId","setpaymentmethodId","installments","paymentmethodThumbnail","setpaymentmethodThumbnail","paymentmethodThumbnailStyle","setpaymentmethodThumbnailStyle","backgroundImage","cartTotal","setCartTotal","email","setEmail","docTypes","setDocTypes","guessPaymentMethod","event","cleanCardInfo","target","value","console","log","length","bin","substring","getPaymentMethod","setPaymentMethod","status","response","id","thumbnail","additional_info_needed","includes","getIssuers","document","getElementById","classList","add","getInstallments","paymentMethodId","setIssuers","issuerSelect","forEach","issuer","opt","createElement","text","name","appendChild","options","remove","alert","issuerId","parseFloat","parseInt","undefined","setInstallments","payer_costs","payerCost","recommended_message","updateInstallmentsForIssuer","doSubmit","getCardToken","preventDefault","$form","createToken","setCardTokenAndPay","updatePaymentMethodThumbnail","postearPago","JSON","stringify","checkoutShoppingCart","fadeOut","setTimeout","show","fadeIn","goBackContainerPayment","tokenString","fetch","method","headers","localStorage","getItem","body","then","res","ok","json","toast","html","classes","clearSession","data","status_detail","comunicacion_sugerida","actualizarBaseDeDatos","vacioCarrito","push","catch","err","listaProductosEnPares","error","arrayResultado","product","deleteProductFromCart","selectDocTypes","map","itemName","itemPrice","e"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useEffect, useState, useContext } from \"react\";\nimport '../../client/css/index.css';\nimport $ from 'jquery'\nimport { useHistory } from \"react-router-dom\";\nimport M from 'materialize-css'\n// import MercadoPagoProducto from '../../components/MercadoPagoProducto';\nimport ShopContext from '../../components/context/shop-context'\nimport { precioTotal, sendMethodCostTopLevel, sendMethodNameTopLevel } from '../../components/ShoppingCart'\n\n// document.addEventListener('DOMContentLoaded', function() {\n//   var elems = document.querySelectorAll('.autocomplete');\n//   M.Autocomplete.init(elems, {});\n// });\n\nconst TestForm = () => {\n  const history = useHistory();\n  //    //REPLACE WITH YOUR PUBLIC KEY AVAILABLE IN: https://developers.mercadopago.com/panel/credentials\n  window.Mercadopago.setPublishableKey(\"TEST-5429f1b7-5db8-46fd-bf95-26ae8fcd39fe\");\n  // window.Mercadopago.getIdentificationTypes();\n  const context = useContext(ShopContext);\n  const [quantity, setQuantity] = useState(1);\n  const [unitPrice] = useState(10);\n  const [amount] = useState(precioTotal(context.cart) + sendMethodCostTopLevel);\n  const [description] = useState(\"Some book\");\n  const [cardNumber, setCardNumber] = useState(\"\");\n  const [paymentmethod, setpaymentmethod] = useState(null);\n  const [paymentmethodId, setpaymentmethodId] = useState(null);\n  let installments = null;\n  const [paymentmethodThumbnail, setpaymentmethodThumbnail] = useState(\"\");\n  const [paymentmethodThumbnailStyle, setpaymentmethodThumbnailStyle] = useState({ backgroundImage: null, });\n  const [cartTotal, setCartTotal] = useState(\"$ 10\");\n  const [email, setEmail] = useState(\"\");\n  const [docTypes, setDocTypes] = useState([])\n\n  // const [token, setToken] = useState(null);\n  // const [docTypes, setDocTypes] = useState(null);\n\n  // useEffect(() => {\n  //   if(!docTypes){\n  //     fetch(\"https://api.mercadopago.com/v1/identification_types?public_key=TEST-147fd98d-a235-429b-aa09-a5b157a1fe61\", {\n  //       headers: {\n  //         \"Content-type\": \"application/json\",\n  //       }\n  //       }).then((res) => {\n  //         console.log(res)\n  //         if (res.ok) {\n  //           return res.json()\n  //         }\n  //       }).then((response)=>{\n  //         var hola = document.createElement(\"option\")\n  //       hola.text = \"hola\"\n  //       document.getElementById(\"docType\").add(hola)\n  //       var hola = document.createElement(\"option\")\n  //       hola.text = \"hola1\"\n  //       // document.getElementById(\"docType\").add(hola)\n  //         // console.log(\"gggfgfgfg\"+response)\n  //         setDocTypes(response)\n  //         console.log(docTypes)\n  //       }, [docTypes])\n  //   }\n  // })\n\n  function guessPaymentMethod(event) {\n    cleanCardInfo();\n    setCardNumber(event.target.value);\n\n    console.log(event.target.value)\n    if (event.target.value.length >= 6) {\n      let bin = event.target.value.substring(0, 6);\n\n      window.Mercadopago.getPaymentMethod({\n        \"bin\": bin\n      }, setPaymentMethod);\n    }\n  };\n\n  function setPaymentMethod(status, response) {\n    if (status === 200) {\n      console.log(paymentmethodThumbnailStyle)\n      setpaymentmethod(response[0]);\n      setpaymentmethodId(response[0].id);\n      setpaymentmethodThumbnail('url(' + response[0].thumbnail + ')');\n      setpaymentmethodThumbnailStyle({ backgroundImage: 'url(' + response[0].thumbnail + ')', });\n      console.log(paymentmethodThumbnailStyle)\n      if (response[0].additional_info_needed.includes(\"issuer_id\")) {\n        getIssuers(response[0].id);\n      } else {\n        document.getElementById('issuerInput').classList.add(\"hidden\");\n\n        getInstallments(\n          response[0].id,\n          document.getElementById('amount').value\n        );\n      }\n    }\n  }\n\n  function getIssuers(paymentMethodId) {\n    window.Mercadopago.getIssuers(\n      paymentMethodId,\n      setIssuers\n    );\n  }\n\n  function setIssuers(status, response) {\n    if (status === 200) {\n      let issuerSelect = document.getElementById('issuer');\n      response.forEach(issuer => {\n        let opt = document.createElement('option');\n        opt.text = issuer.name;\n        opt.value = issuer.id;\n        issuerSelect.appendChild(opt);\n      });\n\n      if (issuerSelect.options.length <= 1) {\n        document.getElementById('issuerInput').classList.add(\"hidden\");\n      } else {\n        document.getElementById('issuerInput').classList.remove(\"hidden\");\n      }\n\n      getInstallments(\n        document.getElementById('paymentMethodId').value,\n        document.getElementById('amount').value,\n        issuerSelect.value\n      );\n\n    } else {\n      alert(`issuers method info error: ${response}`);\n    }\n  }\n\n  function getInstallments(paymentMethodId, amount, issuerId) {\n    window.Mercadopago.getInstallments({\n      \"payment_method_id\": paymentMethodId,\n      \"amount\": parseFloat(amount),\n      \"issuer_id\": issuerId ? parseInt(issuerId) : undefined\n    }, setInstallments);\n  }\n\n  function setInstallments(status, response) {\n    if (status === 200) {\n      document.getElementById('installments').options.length = 0;\n      response[0].payer_costs.forEach(payerCost => {\n        let opt = document.createElement('option');\n        opt.text = payerCost.recommended_message;\n        opt.value = payerCost.installments;\n        document.getElementById('installments').appendChild(opt);\n      });\n    } else {\n      // alert(`installments method info error: ${response}`);\n    }\n  }\n\n  // //Update offered installments when issuer changes\n  function updateInstallmentsForIssuer(event) {\n    window.Mercadopago.getInstallments({\n      \"payment_method_id\": document.getElementById('paymentMethodId').value,\n      \"amount\": parseFloat(document.getElementById('amount').value),\n      \"issuer_id\": parseInt(document.getElementById('issuer').value)\n    }, setInstallments);\n  }\n\n  // //Proceed with payment\n  var doSubmit = false;\n  function getCardToken(event) {\n    event.preventDefault();\n    if (!doSubmit) {\n      let $form = document.getElementById('paymentForm');\n      window.Mercadopago.createToken($form, setCardTokenAndPay);\n      return false;\n    }\n  };\n\n  const updatePaymentMethodThumbnail = {\n    backgroundImage: paymentmethodThumbnail,\n  };\n\n  function setCardTokenAndPay(status, response) {\n    if (status === 200 || status === 201) {\n      // let form = document.getElementById('paymentForm');\n      // let card = document.createElement('input');\n      // card.setAttribute('name', 'token');\n      // card.setAttribute('type', 'hidden');\n      // card.setAttribute('value', response.id);\n      // setToken(response.id)\n      // form.appendChild(card);\n      doSubmit = true;\n      // form.submit(); //Submit form data to your backend\n      postearPago(response.id)\n    } else {\n      alert(\"Verify filled data!\\n\" + JSON.stringify(response, null, 4));\n    }\n  };\n  /***\n   * UX functions \n   */\n\n  function cleanCardInfo() {\n    setpaymentmethodThumbnailStyle({ backgroundImage: \"\", })\n    document.getElementById('issuerInput').classList.add(\"hidden\");\n    document.getElementById('issuer').options.length = 0;\n    document.getElementById('installments').options.length = 0;\n  }\n\n  // //Handle transitions\n  function checkoutShoppingCart() {\n    $('.shopping-cart').fadeOut(500);\n    setTimeout(() => { $('.container_payment').show(500).fadeIn(); }, 500);\n  }\n\n  function goBackContainerPayment() {\n    $('.container_payment').fadeOut(500);\n    setTimeout(() => { $('.shopping-cart').show(500).fadeIn(); }, 500);\n  }\n\n  const postearPago = (tokenString) => {\n    if (cartTotal && unitPrice && email && description && amount && quantity) {//cartTotal && unitPrice && email && description && amount && quantity && token){\n      fetch(\"https://exposicion-virtual.herokuapp.com/process_payment\", {\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          \"Authorization\": localStorage.getItem(\"tokenValido\")\n        },\n        body: JSON.stringify({\n          \"token\": tokenString,\n          \"unitPrice\": unitPrice,\n          \"email\": email,\n          \"description\": description,\n          \"amount\": precioTotal(context.cart) + sendMethodCostTopLevel,\n          \"quantity\": quantity,\n          \"paymentMethodId\": paymentmethodId,\n          \"installments\": document.getElementById(\"installments\").value,\n          \"issuerId\": document.getElementById(\"issuer\").value,\n          \"docType\": document.getElementById(\"docType\").value,\n          \"docNumber\": document.getElementById(\"docNumber\").value\n        })\n      })\n        .then((res) => {\n          console.log(res)\n          if (res.ok) {\n            return res.json()\n          }\n          else {\n            M.toast({ html: \"Error inesperado\", classes: \"#c62828 red darken-3\" });\n            window.Mercadopago.clearSession()\n          }\n        })\n        .then((data) => {\n          if (data && (data.status_detail === \"accredited\" || data.status_detail === \"pending_contingency\" || data.status_detail === \"pending_review_manual\")) {\n            console.log(data.comunicacion_sugerida)\n            console.log(\"realizandoPAGO\")\n            M.toast({ html: data.comunicacion_sugerida, classes: \"#388e3c green darken-2\" });\n            actualizarBaseDeDatos()\n            vacioCarrito()\n          }\n          else {\n            M.toast({ html: data.comunicacion_sugerida, classes: \"#c62828 red darken-3\" });\n          }\n          history.push(\"/\");\n          window.Mercadopago.clearSession()\n        })\n        .catch((err) => {\n          console.log(err);\n          window.Mercadopago.clearSession()\n        });\n    } else {\n      M.toast({ html: \"Llenar todos los campos\", classes: \"#c62828 red darken-3\" });\n    }\n  };\n\n  const actualizarBaseDeDatos = () => {\n    fetch(\"https://exposicion-virtual.herokuapp.com/productSales\", {\n      method: \"PUT\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        \"Authorization\": localStorage.getItem(\"tokenValido\")\n      },\n      body: JSON.stringify({\n        \"sales\": listaProductosEnPares()\n      })\n    })\n      .then((res) => {\n        console.log(res)\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n  };\n\n  const listaProductosEnPares = () => {\n    let arrayResultado = []\n    context.cart.forEach(\n      product => {\n        console.log(\"Pase por (\" + product.id + \", \" + product.quantity + \")\")\n        arrayResultado.push({ \"idProducto\": product.id, \"cantidadVendida\": product.quantity })\n      }\n    )\n    console.log(arrayResultado)\n    return arrayResultado\n  }\n\n  const vacioCarrito = () => {\n    context.cart.forEach(\n      product => {\n        context.deleteProductFromCart(product.id)\n      }\n    )\n  }\n\n  const selectDocTypes = () => {\n    if (docTypes.length === 0) {\n      fetch(\"https://api.mercadopago.com/v1/identification_types?public_key=TEST-147fd98d-a235-429b-aa09-a5b157a1fe61\", {\n        headers: {\n          \"Content-type\": \"application/json\",\n        }\n      }).then((res) => {\n        if (res.ok) {\n          return res.json()\n        }\n      }).then((response) => {\n        setDocTypes(response)\n      })\n    }\n    return (<select id=\"docType\" name=\"docType\" data-checkout=\"docType\" class=\"form-control select-visible\">\n      {docTypes.map((opt => {\n        return (<option value={opt.id}>{opt.name}</option>)\n      }))}\n    </select>)\n  }\n\n  return (\n    <div>\n      {checkoutShoppingCart()}\n      <section class=\"payment-form dark\">\n        <div class=\"container_payment\">\n          <div class=\"block-heading\">\n            <h2>Pago con tarjeta</h2>\n          </div>\n          <div class=\"form-payment\">\n            <div class=\"products\">\n              <h2 class=\"title\">Resumen</h2>\n              <div class=\"item\">\n                <span class=\"price\" id=\"summary-price\" value={'$ ' + unitPrice}></span>\n                {context.cart.map(product => {\n                  return (\n                    <div className=\"row\">\n                      <div className=\"col s6\">\n                        <p class=\"item-name\">{product.itemName} <span id=\"summary-quantity\" value={quantity}>x {product.quantity}</span></p>\n                      </div>\n                      <div className=\"col s6\">\n                        <p class=\"item-name item-total-price\">$ {product.itemPrice * product.quantity}</p>\n                      </div>\n                    </div>\n                  )\n                })}\n                <div className=\"row\">\n                  <div className=\"col s6\">\n                    <p class=\"item-name\">{sendMethodNameTopLevel} <span id=\"summary-quantity\"></span></p>\n                  </div>\n                  <div className=\"col s6\">\n                    <p class=\"item-name item-total-price\">$ {sendMethodCostTopLevel}</p>\n                  </div>\n                </div>\n              </div>\n              <div class=\"total\">Total<span class=\"price\" id=\"summary-total\" >$ {precioTotal(context.cart) + sendMethodCostTopLevel}</span></div>\n            </div>\n            <div class=\"payment-details\">\n              <form action=\"#\" id=\"paymentForm\">\n                <h3 class=\"title\">Datos del comprador</h3>\n                <div class=\"row\">\n                  <div class=\"form-group col-sm-5\">\n                    <label for=\"email\">E-Mail</label>\n                    <input id=\"email\" name=\"email\" type=\"text\" class=\"form-control\" onChange={(e) => setEmail(e.target.value)} />\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"form-group col-sm-5\">\n                    <label for=\"docType\">Tipo de documento</label>\n                    {selectDocTypes()}\n                  </div>\n                  <div class=\"form-group col-sm-7\">\n                    <label for=\"docNumber\">Numero de documento</label>\n                    <input id=\"docNumber\" name=\"docNumber\" data-checkout=\"docNumber\" type=\"text\" class=\"form-control\" />\n                  </div>\n                </div>\n                <br />\n                <h3 class=\"title\">Datos de la tarjeta</h3>\n                <div class=\"row\">\n                  <div class=\"form-group col-sm-8\">\n                    <label for=\"cardholderName\">Titular de la tarjeta</label>\n                    <input id=\"cardholderName\" data-checkout=\"cardholderName\" type=\"text\" class=\"form-control\" />\n                  </div>\n                  <div class=\"col s12\">\n                    <label for=\"\">Fecha de vencimiento</label>\n                    <div class=\"input-group expiration-date\">\n                      <input type=\"text\" class=\"form-control\" placeholder=\"MM\" id=\"cardExpirationMonth\" data-checkout=\"cardExpirationMonth\"\n                        onselectstart=\"return false\" onpaste=\"return false\" onCopy=\"return false\" onCut=\"return false\" onDrag=\"return false\" onDrop=\"return false\" autocomplete='off' />\n                      <span class=\"date-separator\">/</span>\n                      <input type=\"text\" class=\"form-control\" placeholder=\"YY\" id=\"cardExpirationYear\" data-checkout=\"cardExpirationYear\"\n                        onselectstart=\"return false\" onpaste=\"return false\" onCopy=\"return false\" onCut=\"return false\" onDrag=\"return false\" onDrop=\"return false\" autocomplete='off' />\n                    </div>\n                  </div>\n                  <div class=\"form-group col-sm-8\">\n                    <label for=\"cardNumber\">Nmero de tarjeta</label>\n                    <input type=\"text\" class=\"form-control input-background\" id=\"cardNumber\" data-checkout=\"cardNumber\"\n                      onselectstart=\"return false\" onpaste=\"return false\" onCopy=\"return false\" onCut=\"return false\" onDrag=\"return false\" onDrop=\"return false\" style={paymentmethodThumbnailStyle} autocomplete='off' onChange={guessPaymentMethod} />\n                  </div>\n                  <div class=\"form-group col-sm-4\">\n                    <label for=\"securityCode\">Cdigo de seguridad</label>\n                    <input id=\"securityCode\" data-checkout=\"securityCode\" type=\"text\" class=\"form-control\"\n                      onselectstart=\"return false\" onpaste=\"return false\" onCopy=\"return false\" onCut=\"return false\" onDrag=\"return false\" onDrop=\"return false\" autocomplete='off' />\n                  </div>\n                  <div id=\"issuerInput\" class=\"form-group col-sm-12 hidden\">\n                    <label for=\"issuer\">Entidad emisora</label>\n                    <select id=\"issuer\" name=\"issuer\" data-checkout=\"issuer\" class=\"form-control select-visible\" onChange={updateInstallmentsForIssuer}></select>\n                  </div>\n                  <div class=\"form-group col-sm-12\">\n                    <label for=\"installments\">Cuotas</label>\n                    <select type=\"text\" id=\"installments\" name=\"installments\" class=\"form-control select-visible\"></select>\n                  </div>\n                  <div class=\"form-group col-sm-12\">\n                    <input type=\"hidden\" name=\"transactionAmount\" id=\"amount\" value={amount} />\n                    <input type=\"hidden\" name=\"paymentMethodId\" id=\"paymentMethodId\" value={paymentmethodId} />\n                    <input type=\"hidden\" name=\"description\" id=\"description\" value={description} />\n                    <br />\n                    <div className=\"row\">\n                      <div className=\"col s12\">\n                        <a onClick={getCardToken} className=\"waves-effect waves-light red lighten-2 btn-large\" id=\"butonSubmit\">Pagar</a>\n                      </div>\n                    </div>\n                    <br />\n\n                    <a id=\"go-back\" href=\"/shoppingcart\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 10 10\" class=\"chevron-left\">\n                        <path fill=\"#009EE3\" fill-rule=\"nonzero\" id=\"chevron_left\" d=\"M7.05 1.4L6.2.552 1.756 4.997l4.449 4.448.849-.848-3.6-3.6z\"></path>\n                      </svg>\n                         Volver al carrito\n                       </a>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default TestForm;"]},"metadata":{},"sourceType":"module"}