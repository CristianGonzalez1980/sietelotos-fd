{"ast":null,"code":"import _slicedToArray from\"/home/cristian/Documentos/ProyectosGIT/exposicion-virtual-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'../../styles/DeleteBanner.css';import{/*Link,*/useHistory}from'react-router-dom';import M from'materialize-css';import AdminOptions from'../AdminOptions';import BannerCategories from'../BannerCategories';import{postearDeleteEntity,postearGetEntity}from'../AdminPanel/FetchFunctions';document.addEventListener('DOMContentLoaded',function(){var elems=document.querySelectorAll('select');M.FormSelect.init(elems,{});});var DeleteBanner=function DeleteBanner(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),prevBanners=_useState2[0],setPrevBanners=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),banners=_useState4[0],setBanners=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setcategory=_useState6[1];var saveBannerHistory=function saveBannerHistory(gettedBaners){setPrevBanners(banners);setBanners(gettedBaners);};useEffect(function(){if(banners.length!==prevBanners.length||prevBanners.length===0){//cargaba los banners constantemente\npostearGetEntity({entityClass:\"banners\",fx:saveBannerHistory});}},[banners,prevBanners]);var deleteBanner=function deleteBanner(id){postearDeleteEntity({historyProp:history,entityClass:\"banners\",id:id});};var listOfBanners=function listOfBanners(category){if(banners){var bannersByCategory=banners.filter(function(banner){return banner.category===category;});var list=bannersByCategory.map(function(banner){return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"col s1\",id:\"colCard\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\",id:\"cardDeleteBD\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-image\",id:\"imageDB\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"bannerImage\",src:banner.image}),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){deleteBanner(banner.id);},className:\"btn-floating halfway-fab waves-effect waves-light red\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"delete\"))))));});return/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},list));}};return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(AdminOptions,null),/*#__PURE__*/React.createElement(\"div\",{className:\"col s8\"},/*#__PURE__*/React.createElement(\"div\",null,!banners?/*#__PURE__*/React.createElement(\"p\",null,\"Loading...\"):/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"form\",{className:\"col s12\",id:\"bannerform\"},/*#__PURE__*/React.createElement(BannerCategories,{val:category,fx:setcategory})),listOfBanners(category)))));};export default DeleteBanner;","map":{"version":3,"sources":["/home/cristian/Documentos/ProyectosGIT/exposicion-virtual-frontend/src/components/AdminPanel/DeleteBanner.js"],"names":["React","useState","useEffect","useHistory","M","AdminOptions","BannerCategories","postearDeleteEntity","postearGetEntity","document","addEventListener","elems","querySelectorAll","FormSelect","init","DeleteBanner","history","prevBanners","setPrevBanners","banners","setBanners","category","setcategory","saveBannerHistory","gettedBaners","length","entityClass","fx","deleteBanner","id","historyProp","listOfBanners","bannersByCategory","filter","banner","list","map","image"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport '../../styles/DeleteBanner.css'\nimport { /*Link,*/ useHistory } from 'react-router-dom'\nimport M from 'materialize-css'\nimport AdminOptions from '../AdminOptions';\nimport BannerCategories from '../BannerCategories';\nimport { postearDeleteEntity, postearGetEntity } from '../AdminPanel/FetchFunctions'\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var elems = document.querySelectorAll('select');\n  M.FormSelect.init(elems, {});\n});\n\nconst DeleteBanner = () => {\n  const history = useHistory()\n  const [prevBanners, setPrevBanners] = useState([])\n  const [banners, setBanners] = useState([])\n  const [category, setcategory] = useState(null)\n\n  const saveBannerHistory = (gettedBaners) => {\n    setPrevBanners(banners)\n    setBanners(gettedBaners)\n  }\n\n  useEffect(() => {\n    if (banners.length !== prevBanners.length || prevBanners.length === 0) {//cargaba los banners constantemente\n      postearGetEntity({\n        entityClass: \"banners\", fx: saveBannerHistory\n      });\n    }\n  }, [banners, prevBanners]);\n\n  const deleteBanner = (id) => {\n    postearDeleteEntity({ historyProp: history, entityClass: \"banners\", id: id });\n  }\n\n  const listOfBanners = (category) => {\n    if (banners) {\n      const bannersByCategory = banners.filter(banner => banner.category === category)\n      const list = bannersByCategory.map((banner) => {\n        return (\n          <li>\n            <div className=\"col s1\" id='colCard'>\n              <div className=\"card\" id='cardDeleteBD'>\n                <div className=\"card-image\" id=\"imageDB\">\n                  <img alt=\"bannerImage\" src={banner.image} />\n                  <button onClick={() => {\n                    deleteBanner(banner.id)\n                  }} className=\"btn-floating halfway-fab waves-effect waves-light red\"><i className=\"material-icons\">delete</i></button>\n                </div>\n              </div>\n            </div>\n          </li>\n        )\n      })\n      return (\n        <ul>\n          <div className='row'>\n            {list}\n          </div>\n        </ul>\n      )\n    }\n  }\n\n  return (\n    <div className=\"row\">\n      <AdminOptions />\n      <div className='col s8'>\n        <div>\n          {\n            !banners ?\n              <p>Loading...</p>\n              :\n              <div className=\"row\">\n                <form className=\"col s12\" id=\"bannerform\">\n                  <BannerCategories val={category} fx={setcategory} />\n                </form>\n                {listOfBanners(category)}\n              </div>\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default DeleteBanner;"]},"metadata":{},"sourceType":"module"}