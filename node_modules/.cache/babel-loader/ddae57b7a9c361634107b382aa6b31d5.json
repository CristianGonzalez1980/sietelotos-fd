{"ast":null,"code":"import _slicedToArray from\"/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import React,{useContext,useEffect,useState}from'react';//import { Row } from 'react-materialize'\nimport{Link}from'react-router-dom';import'../styles/ShoppingCart.css';import ShopContext from'./context/shop-context';import CourrierCard from'./CourrierCard';export var sendMethodCostTopLevel=null;export var sendMethodNameTopLevel=null;export var precioTotal=function precioTotal(products){var contador=0;products.forEach(function(cartItem){contador=contador+cartItem.itemPrice*cartItem.quantity;});return contador;};export var pesoTotal=function pesoTotal(products){var acumulador=0;products.forEach(function(cartItem){console.log(parseInt(cartItem.pesoGr/100)+1);acumulador=acumulador+(parseInt(cartItem.pesoGr/100)+1)*cartItem.quantity;});return acumulador;};export var volumenTotal=function volumenTotal(products){var anchoTotal=0;var longitudTotal=0;var alturaTotal=0;products.forEach(function(cartItem){anchoTotal+=cartItem.ancho*cartItem.quantity;longitudTotal+=cartItem.longitud*cartItem.quantity;alturaTotal+=cartItem.alto*cartItem.quantity;});return\"\".concat(longitudTotal,\"x\").concat(anchoTotal,\"x\").concat(alturaTotal);};var ShoppingCart=function ShoppingCart(){/**USO EL CONTEXTO DE SHOPCONTEXT */var context=useContext(ShopContext);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),codigoPostal=_useState2[0],setCodigoPostal=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),sendMethodName=_useState4[0],setSendMethodName=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),sendMethodCost=_useState6[0],setSendMethodCost=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),courrierOptionsList=_useState8[0],setCourrierOptionsList=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),courrierViewList=_useState10[0],setCourrierViewList=_useState10[1];function calcularEnvio(){if(codigoPostal>=1000&&codigoPostal<=9999){console.log(codigoPostal);console.log(volumenTotal(context.cart));console.log(pesoTotal(context.cart));fetch(\"https://api.mercadolibre.com/sites/MLA/shipping_options?zip_code_from=1875&zip_code_to=\".concat(codigoPostal,\"&dimensions=\").concat(volumenTotal(context.cart),\",\").concat(pesoTotal(context.cart)),{headers:{\"Content-type\":\"application/json\"}}).then(function(res){if(res.ok){return res.json();}}).then(function(response){var options=response;setCourrierOptionsList(options.options);setCourrierViewList(courrierOptions());/*  let option = options.options.find(option => option.shipping_method_id === 503045)\n            sendMethodNameTopLevel = option.name\n            setSendMethodName(option.name)\n            sendMethodCostTopLevel = option.cost\n            setSendMethodCost(option.cost)\n            console.log(option.name)\n            console.log(option.cost)*/console.log(options.options);}).catch(function(err){sendMethodNameTopLevel=\"No se pudo calcular el envio.\";setSendMethodName(\"No se pudo calcular el envio.\");sendMethodCostTopLevel=\"No definido.\";setSendMethodCost(\"No definido.\");console.log(err);console.log(err);});}}function precioTotalConEnvio(){if(sendMethodCost!==\"No definido.\"){sendMethodNameTopLevel=sendMethodName;sendMethodCostTopLevel=sendMethodCost;return sendMethodCost?\"$ \"+(precioTotal(context.cart)+sendMethodCost):\"\";}else{return sendMethodCost;}}var courrierOptions=function courrierOptions(){var courrierItemList=function courrierItemList(){var list=courrierOptionsList.map(function(courrier){console.log(courrier.cost);return/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(CourrierCard,{name:courrier.name,cost:courrier.cost,fx:setSendMethodName,fx2:setSendMethodCost}));});return/*#__PURE__*/React.createElement(\"form\",{action:\"#\",id:\"currieroption\"},console.log(list),list,/*#__PURE__*/React.createElement(\"p\",{id:\"currieroption\"},/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{name:\"style2\",type:\"radio\",id:\"currieroption\",onClick:function onClick(){setSendMethodName(\"Se agrega a envío en curso\");setSendMethodCost(0.01);}}),/*#__PURE__*/React.createElement(\"span\",null,\"Tengo una compra previa pendiente de env\\xEDo\"))));};return courrierItemList();};useEffect(function(){//console.log(context);\n},[]);return/*#__PURE__*/ (/**\n     * 1) AL MAINNAVIGATION LE PASO COMO PROPS EL CART DEL CONTEXTO, LE HAGO UN REDUCE PARA OBTENER LA CANTIDAD DE \n     *    ELEMENTOS EN EL CARRITO\n     */React.createElement(React.Fragment,null,context.cart.length<=0?/*#__PURE__*/React.createElement(\"div\",{id:\"noHayElementos\",className:\"numero\"},\"\\xA1No hay productos en el carrito!\"):/*#__PURE__*/React.createElement(\"main\",{className:\"cart\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s12\"},/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Imagen\"),/*#__PURE__*/React.createElement(\"th\",null,\"Nombre\"),/*#__PURE__*/React.createElement(\"th\",null,\"Cantidad\"),/*#__PURE__*/React.createElement(\"th\",null,\"Precio\"))),context.cart.map(function(cartItem){return/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"td\",{id:\"tdCart\"},/*#__PURE__*/React.createElement(\"img\",{id:\"imgCart\",alt:cartItem.itemName,src:cartItem.images[0]})),/*#__PURE__*/React.createElement(\"td\",{id:\"tdCart\"},cartItem.itemName),/*#__PURE__*/React.createElement(\"td\",{id:\"tdCart\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s12\"},/*#__PURE__*/React.createElement(\"button\",{onClick:context.removeProductFromCart.bind(_this,cartItem.id)},\"-\"),/*#__PURE__*/React.createElement(\"input\",{id:\"inptCartCant\",className:\"validate\",value:cartItem.quantity}),/*#__PURE__*/React.createElement(\"button\",{onClick:context.addProductToCart.bind(_this,cartItem)},\"+\"))),/*#__PURE__*/React.createElement(\"td\",{id:\"tdCart\"},\"$ \",cartItem.itemPrice*cartItem.quantity),/*#__PURE__*/React.createElement(\"td\",{id:\"tdCart\"},\" \",/*#__PURE__*/React.createElement(\"button\",{onClick:context.deleteProductFromCart.bind(_this,cartItem.id)},/*#__PURE__*/React.createElement(\"i\",{class:\"material-icons\"},\"delete\"))));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col s12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row rightField\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s12\"},/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Subtotal: $ \",precioTotal(context.cart)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row centerField \"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s6 offset-6\"},/*#__PURE__*/React.createElement(\"input\",{id:\"inptCartCant\",placeholder:\"C\\xF3digo Postal\",value:codigoPostal,onChange:function onChange(e){return setCodigoPostal(e.target.value);}}),/*#__PURE__*/React.createElement(\"button\",{className:\"waves-effect waves-light btn\",onClick:calcularEnvio,style:{marginLeft:20}},\"Calcular env\\xEDo\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row leftField\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s11\"},courrierViewList===null?/*#__PURE__*/React.createElement(\"strong\",null):/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Opciones de env\\xEDo:\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"col s1\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"row leftField\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s2\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col s8\"},/*#__PURE__*/React.createElement(\"div\",null,courrierViewList)),/*#__PURE__*/React.createElement(\"div\",{className:\"col s2\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"row rightField\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s12\"},/*#__PURE__*/React.createElement(\"h3\",null,sendMethodCost===null?/*#__PURE__*/React.createElement(\"strong\",null):/*#__PURE__*/React.createElement(\"strong\",null,\"Precio total: \",precioTotalConEnvio()))),sendMethodCost===null?/*#__PURE__*/React.createElement(\"strong\",null):/*#__PURE__*/React.createElement(\"div\",{className:\"col s6 offset-s6\"},sendMethodCost===\"No definido.\"?/*#__PURE__*/React.createElement(\"button\",{disabled:true,className:\"waves-effect waves-light btn\"},\"Revisar envio\"):/*#__PURE__*/React.createElement(Link,{to:localStorage.getItem('user')===\"admin\"||localStorage.getItem('user')===\"usuario\"?\"/testform\":\"/login\"},/*#__PURE__*/React.createElement(\"button\",{className:\"waves-effect waves-light btn\"},\"Comprar\"))))))));};export default ShoppingCart;","map":{"version":3,"sources":["/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/src/components/ShoppingCart.js"],"names":["React","useContext","useEffect","useState","Link","ShopContext","CourrierCard","sendMethodCostTopLevel","sendMethodNameTopLevel","precioTotal","products","contador","forEach","cartItem","itemPrice","quantity","pesoTotal","acumulador","console","log","parseInt","pesoGr","volumenTotal","anchoTotal","longitudTotal","alturaTotal","ancho","longitud","alto","ShoppingCart","context","codigoPostal","setCodigoPostal","sendMethodName","setSendMethodName","sendMethodCost","setSendMethodCost","courrierOptionsList","setCourrierOptionsList","courrierViewList","setCourrierViewList","calcularEnvio","cart","fetch","headers","then","res","ok","json","response","options","courrierOptions","catch","err","precioTotalConEnvio","courrierItemList","list","map","courrier","cost","name","length","itemName","images","removeProductFromCart","bind","id","addProductToCart","deleteProductFromCart","e","target","value","marginLeft","localStorage","getItem"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\n//import { Row } from 'react-materialize'\nimport { Link } from 'react-router-dom'\nimport '../styles/ShoppingCart.css'\nimport ShopContext from './context/shop-context'\nimport CourrierCard from './CourrierCard';\n\nexport var sendMethodCostTopLevel = null\nexport var sendMethodNameTopLevel = null\n\nexport const precioTotal = (products) => {\n  let contador = 0\n  products.forEach((cartItem) => {\n    contador = contador + (cartItem.itemPrice * cartItem.quantity)\n  })\n  return contador\n}\n\nexport const pesoTotal = (products) => {\n  let acumulador = 0\n  products.forEach((cartItem) => {\n    console.log((parseInt(cartItem.pesoGr / 100) + 1))\n    acumulador = acumulador + ((parseInt(cartItem.pesoGr / 100) + 1) * cartItem.quantity)\n  })\n  return acumulador\n}\n\nexport const volumenTotal = (products) => {\n  let anchoTotal = 0\n  let longitudTotal = 0\n  let alturaTotal = 0\n  products.forEach((cartItem) => {\n    anchoTotal += cartItem.ancho * cartItem.quantity\n    longitudTotal += cartItem.longitud * cartItem.quantity\n    alturaTotal += cartItem.alto * cartItem.quantity\n  })\n  return `${longitudTotal}x${anchoTotal}x${alturaTotal}`\n}\n\nconst ShoppingCart = () => {\n  /**USO EL CONTEXTO DE SHOPCONTEXT */\n  const context = useContext(ShopContext);\n  const [codigoPostal, setCodigoPostal] = useState(null)\n  const [sendMethodName, setSendMethodName] = useState(null)\n  const [sendMethodCost, setSendMethodCost] = useState(null)\n  const [courrierOptionsList, setCourrierOptionsList] = useState([])\n  const [courrierViewList, setCourrierViewList] = useState(null)\n\n  function calcularEnvio() {\n    if (codigoPostal >= 1000 && codigoPostal <= 9999) {\n      console.log(codigoPostal)\n      console.log(volumenTotal(context.cart))\n      console.log(pesoTotal(context.cart))\n      fetch(`https://api.mercadolibre.com/sites/MLA/shipping_options?zip_code_from=1875&zip_code_to=${codigoPostal}&dimensions=${volumenTotal(context.cart)},${pesoTotal(context.cart)}`, {\n        headers: {\n          \"Content-type\": \"application/json\",\n        }\n      })\n        .then((res) => {\n          if (res.ok) {\n            return res.json()\n          }\n        })\n        .then((response) => {\n          let options = response\n          setCourrierOptionsList(options.options)\n          setCourrierViewList(courrierOptions())\n          /*  let option = options.options.find(option => option.shipping_method_id === 503045)\n            sendMethodNameTopLevel = option.name\n            setSendMethodName(option.name)\n            sendMethodCostTopLevel = option.cost\n            setSendMethodCost(option.cost)\n            console.log(option.name)\n            console.log(option.cost)*/\n          console.log(options.options)\n        })\n        .catch((err => {\n          sendMethodNameTopLevel = \"No se pudo calcular el envio.\"\n          setSendMethodName(\"No se pudo calcular el envio.\")\n          sendMethodCostTopLevel = \"No definido.\"\n          setSendMethodCost(\"No definido.\")\n          console.log(err)\n          console.log(err)\n        }))\n    }\n  }\n\n  function precioTotalConEnvio() {\n    if (sendMethodCost !== \"No definido.\") {\n      sendMethodNameTopLevel = sendMethodName\n      sendMethodCostTopLevel = sendMethodCost\n      return sendMethodCost ? \"$ \" + (precioTotal(context.cart) + sendMethodCost) : \"\"\n    } else {\n      return sendMethodCost\n    }\n  }\n\n  const courrierOptions = () => {\n\n    const courrierItemList = () => {\n      const list = courrierOptionsList.map((courrier) => {\n        console.log(courrier.cost)\n        return (\n          <p>\n            <CourrierCard name={courrier.name} cost={courrier.cost} fx={setSendMethodName} fx2={setSendMethodCost} />\n          </p>\n        )\n      })\n      return (\n        <form action=\"#\" id=\"currieroption\">\n          {console.log(list)}\n          {list}\n          <p id=\"currieroption\">\n            <label>\n              <input name=\"style2\" type=\"radio\" id=\"currieroption\" onClick={() => { setSendMethodName(\"Se agrega a envío en curso\"); setSendMethodCost(0.01) }} />\n              <span>Tengo una compra previa pendiente de envío</span>\n            </label>\n          </p>\n        </form>\n      )\n    }\n    return (\n      courrierItemList()\n    )\n  }\n\n  useEffect(() => {\n    //console.log(context);\n  }, []);\n\n  return (\n    /**\n     * 1) AL MAINNAVIGATION LE PASO COMO PROPS EL CART DEL CONTEXTO, LE HAGO UN REDUCE PARA OBTENER LA CANTIDAD DE \n     *    ELEMENTOS EN EL CARRITO\n     */\n    <React.Fragment>\n      {\n        context.cart.length <= 0 ?\n          <div id=\"noHayElementos\" className=\"numero\">\n            ¡No hay productos en el carrito!\n          </div>\n          :\n          <main className=\"cart\">\n            <div className=\"row\">\n              <div className=\"col s12\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>Imagen</th>\n                      <th>Nombre</th>\n                      <th>Cantidad</th>\n                      <th>Precio</th>\n                    </tr>\n                  </thead>\n                  {context.cart.map(cartItem => (\n                    <tbody>\n                      <td id=\"tdCart\"><img id=\"imgCart\" alt={cartItem.itemName} src={cartItem.images[0]} /></td>\n                      <td id=\"tdCart\">{cartItem.itemName}</td>\n                      <td id=\"tdCart\">\n                        <div className=\"input-field col s12\">\n                          <button\n                            onClick={context.removeProductFromCart.bind(\n                              this,\n                              cartItem.id\n                            )}\n                          >-</button>\n                          <input id=\"inptCartCant\" className=\"validate\" value={cartItem.quantity} />\n                          <button onClick={context.addProductToCart.bind(this, cartItem)}>+</button>\n                        </div>\n                      </td>\n                      <td id=\"tdCart\">$ {cartItem.itemPrice * cartItem.quantity}</td>\n                      <td id=\"tdCart\"> <button\n                        onClick={context.deleteProductFromCart.bind(\n                          this,\n                          cartItem.id\n                        )}\n                      >\n                        <i class=\"material-icons\">delete</i>\n                      </button></td>\n                    </tbody>\n                  ))}\n                </table>\n              </div>\n              <div className=\"col s12\">\n                <div className=\"row rightField\">\n                  <div className=\"col s12\">\n                    <h4>\n                      <strong>\n                        Subtotal: $ {precioTotal(context.cart)}\n                      </strong>\n                    </h4>\n                  </div>\n                </div>\n              </div>\n              <div className=\"row centerField \">\n                <div className=\"col s6 offset-6\">\n                  <input id=\"inptCartCant\" placeholder=\"Código Postal\" value={codigoPostal} onChange={(e) => setCodigoPostal(e.target.value)} />\n                  <button className=\"waves-effect waves-light btn\" onClick={calcularEnvio} style={{ marginLeft: 20 }}>Calcular envío</button>\n                </div>\n              </div>\n              <div className=\"row leftField\">\n                <div className=\"col s11\">\n                  {courrierViewList === null ?\n                    <strong>\n\n                    </strong>\n                    :\n                    <h4>\n                      <strong>\n                        Opciones de envío:\n                    </strong>\n                    </h4>\n                  }\n                </div>\n                <div className=\"col s1\">\n                  {/*<h4>\n                    <strong>\n                      (sendMethodCost ? \"$ \" + sendMethodCost : \"\")\n                    </strong>\n                  </h4>*/}\n                </div>\n              </div>\n              <div className=\"row leftField\">\n                <div className=\"col s2\">\n                </div>\n                <div className=\"col s8\">\n                  <div>{courrierViewList}</div>\n                </div>\n                <div className=\"col s2\">\n                </div>\n              </div>\n              <div className=\"row rightField\">\n                <div className=\"col s12\">\n                  <h3>\n                    {sendMethodCost === null ?\n                      <strong>\n\n                      </strong>\n                      :\n                      <strong>\n                        Precio total: {precioTotalConEnvio()}\n                      </strong>\n                    }\n                  </h3>\n                </div>\n                {sendMethodCost === null ?\n                  <strong>\n\n                  </strong>\n                  :\n                  <div className=\"col s6 offset-s6\">\n                    {sendMethodCost === \"No definido.\" ?\n                      <button disabled={true} className=\"waves-effect waves-light btn\">\n                        Revisar envio\n                  </button>\n                      :\n                      <Link to={localStorage.getItem('user') === \"admin\" || localStorage.getItem('user') === \"usuario\" ? \"/testform\" : \"/login\"}>\n                        <button className=\"waves-effect waves-light btn\">\n                          Comprar\n                    </button>\n                      </Link>\n                    }\n                  </div>\n                }\n              </div>\n            </div>\n          </main>\n      }\n    </React.Fragment>\n  );\n};\n\nexport default ShoppingCart;"]},"metadata":{},"sourceType":"module"}