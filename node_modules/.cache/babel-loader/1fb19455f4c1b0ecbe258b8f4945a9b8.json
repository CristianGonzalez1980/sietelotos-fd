{"ast":null,"code":"//AGREGO UN PRODUCTO\nexport const ADD_PRODUCT = 'ADD_PRODUCT'; //BORRO UN PRODUCTO\n\nexport const REMOVE_PRODUCT = 'REMOVE_PRODUCT'; //EMILINA EL PRODUCTO\n\nexport const DELETE_PRODUCT = 'DELETE_PRODUCT';\n/***TOMA COMO PARAMETRO UN PRODUCTO Y UN ESTADO\n1) GENERO MI CARRITO ACTUALIZADO \n2) BUSCO EL INDEX DE MI CARRITO\n3)PREGUNTA SI EL INDEX NO EXITE {ACTUALIZO EL UPDATEDCART HACIENDO PUSH EN ESA LISTA}\n  SI EXISTE GENERA UN UPDATEDITEM LE SUMA EL QUANTITY EN 1 Y LUEGO ACTUALIZA EL UPDATEDCART\n4) RETORNA EL ESTADO PREVIO Y SETEA EL UPDATEDCART EN EL CART\n***/\n\nconst addProductToCart = (product, state) => {\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => item.id === product.id);\n\n  if (updatedItemIndex < 0) {\n    updatedCart.push({ ...product,\n      quantity: 1\n    });\n  } else {\n    const updatedItem = { ...updatedCart[updatedItemIndex]\n    };\n    updatedItem.quantity++;\n    updatedCart[updatedItemIndex] = updatedItem;\n  }\n\n  localStorage.setItem('cart', JSON.stringify(updatedCart));\n  return { ...state,\n    cart: updatedCart\n  };\n};\n/***TOMA COMO PARAMETRO UN ID DE PRODUCTO Y UN ESTADO\n1) GENERO MI CARRITO ACTUALIZADO \n2) BUSCO EL INDEX DE MI CARRITO\n3)GENERA UN UPDATEDITEM, LE RESTA EL QUANTITY EN 1 Y LUEGO ACTUALIZA EL UPDATEDCART\n4) PREGUNTA SI LA QUANTITY ES 0 LO BORRA CON SPLICE\n   SINO ACTUALIZA EL UPDATEDCART\n5) RETORNA EL ESTADO PREVIO Y SETEA EL UPDATEDCART EN EL CART\n***/\n\n\nconst removeProductFromCart = (productId, state) => {\n  //console.log('Removing product with id: ' + productId);\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => item.id === productId);\n  const updatedItem = { ...updatedCart[updatedItemIndex]\n  };\n  updatedItem.quantity--;\n\n  if (!updatedItem.quantity <= 0) {\n    updatedCart[updatedItemIndex] = updatedItem; //console.log(updatedCart)\n    //console.log(updatedItem)\n  }\n\n  localStorage.setItem('cart', JSON.stringify(updatedCart));\n  return { ...state,\n    cart: updatedCart\n  };\n};\n\nconst deleteProductFromCart = (productId, state) => {\n  console.log('Removing product with id: ' + productId);\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => item.id === productId);\n  updatedCart.splice(updatedItemIndex, 1);\n  localStorage.setItem('cart', JSON.stringify(updatedCart));\n  return { ...state,\n    cart: updatedCart\n  };\n};\n/**\n * SETEA EL REDUCER\n * @param {*} state \n * @param {*} action \n */\n\n\nexport const shopReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_PRODUCT:\n      return addProductToCart(action.product, state);\n\n    case REMOVE_PRODUCT:\n      return removeProductFromCart(action.productId, state);\n\n    case DELETE_PRODUCT:\n      return deleteProductFromCart(action.productId, state);\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/src/components/context/reducers.js"],"names":["ADD_PRODUCT","REMOVE_PRODUCT","DELETE_PRODUCT","addProductToCart","product","state","updatedCart","cart","updatedItemIndex","findIndex","item","id","push","quantity","updatedItem","localStorage","setItem","JSON","stringify","removeProductFromCart","productId","deleteProductFromCart","console","log","splice","shopReducer","action","type"],"mappings":"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","sourcesContent":["//AGREGO UN PRODUCTO\nexport const ADD_PRODUCT = 'ADD_PRODUCT';\n\n//BORRO UN PRODUCTO\nexport const REMOVE_PRODUCT = 'REMOVE_PRODUCT';\n\n//EMILINA EL PRODUCTO\nexport const DELETE_PRODUCT = 'DELETE_PRODUCT';\n\n/***TOMA COMO PARAMETRO UN PRODUCTO Y UN ESTADO\n1) GENERO MI CARRITO ACTUALIZADO \n2) BUSCO EL INDEX DE MI CARRITO\n3)PREGUNTA SI EL INDEX NO EXITE {ACTUALIZO EL UPDATEDCART HACIENDO PUSH EN ESA LISTA}\n  SI EXISTE GENERA UN UPDATEDITEM LE SUMA EL QUANTITY EN 1 Y LUEGO ACTUALIZA EL UPDATEDCART\n4) RETORNA EL ESTADO PREVIO Y SETEA EL UPDATEDCART EN EL CART\n***/\nconst addProductToCart = (product, state) => {\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(\n    item => item.id === product.id\n  );\n\n  if (updatedItemIndex < 0) {\n    updatedCart.push({ ...product, quantity: 1 });\n  } else {\n    const updatedItem = {\n      ...updatedCart[updatedItemIndex]\n    };\n    updatedItem.quantity++;\n    updatedCart[updatedItemIndex] = updatedItem;\n  }\n  localStorage.setItem('cart', JSON.stringify(updatedCart))\n  return { ...state, cart: updatedCart };\n};\n\n/***TOMA COMO PARAMETRO UN ID DE PRODUCTO Y UN ESTADO\n1) GENERO MI CARRITO ACTUALIZADO \n2) BUSCO EL INDEX DE MI CARRITO\n3)GENERA UN UPDATEDITEM, LE RESTA EL QUANTITY EN 1 Y LUEGO ACTUALIZA EL UPDATEDCART\n4) PREGUNTA SI LA QUANTITY ES 0 LO BORRA CON SPLICE\n   SINO ACTUALIZA EL UPDATEDCART\n5) RETORNA EL ESTADO PREVIO Y SETEA EL UPDATEDCART EN EL CART\n***/\nconst removeProductFromCart = (productId, state) => {\n  //console.log('Removing product with id: ' + productId);\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => item.id === productId);\n\n  const updatedItem = {\n    ...updatedCart[updatedItemIndex]\n  };\n  updatedItem.quantity--;\n  if (! updatedItem.quantity <= 0) {\n    updatedCart[updatedItemIndex] = updatedItem;\n    \n    //console.log(updatedCart)\n    //console.log(updatedItem)\n  } \n  localStorage.setItem('cart', JSON.stringify(updatedCart))\n  return { ...state, cart: updatedCart };\n};\n\nconst deleteProductFromCart = (productId, state) => {\n  console.log('Removing product with id: ' + productId);\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => item.id === productId);\n\n    updatedCart.splice(updatedItemIndex, 1);\n    localStorage.setItem('cart', JSON.stringify(updatedCart))\n  return { ...state, cart: updatedCart };\n};\n\n/**\n * SETEA EL REDUCER\n * @param {*} state \n * @param {*} action \n */\nexport const shopReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_PRODUCT:\n      return addProductToCart(action.product, state);\n    case REMOVE_PRODUCT:\n      return removeProductFromCart(action.productId, state);\n    case DELETE_PRODUCT:\n      return deleteProductFromCart(action.productId, state);\n    default:\n      return state;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}