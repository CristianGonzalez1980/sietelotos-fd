{"ast":null,"code":"import _slicedToArray from\"/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState/*useEffect, */,useContext}from\"react\";import{Link,useHistory}from\"react-router-dom\";import{userContext}from\"../../App\";import\"../../styles/Singin.css\";import M from\"materialize-css\";import logo from\"../../images/logo.png\";import axios from\"axios\";var Login=function Login(){var history=useHistory();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),dni=_useState2[0],setdni=_useState2[1];var _useContext=useContext(userContext),dispatch=_useContext.dispatch;var PostData=function PostData(){if(dni<1000000){M.toast({html:\"DNI Inválido\",classes:\"#c62828 red darken-3\"});}else{axios.post(\"https://exposicion-virtual.herokuapp.com/login\",{dni:dni}).then(function(success){localStorage.setItem('nombre',success.data.nombre);localStorage.setItem('apellido',success.data.apellido);localStorage.setItem('tokenValido',success.headers.authorization);axios.defaults.headers['authorization']=localStorage.getItem('tokenValido');localStorage.setItem(\"user\",\"usuario\");dispatch({type:\"USER\",payload:\"user\"});M.toast({html:\"Bienvenido \".concat(localStorage.nombre),classes:\"#388e3c green darken-2\"});console.log(\"success\",success.headers.authorization);history.push(\"/\");}).catch(function(error){console.log(error);M.toast({html:\"datos invalidos o el usuario no existe\",classes:\"#c62828 red darken-3\"});});}};return/*#__PURE__*/React.createElement(\"div\",{className:\"mycard\"},/*#__PURE__*/React.createElement(\"div\",{id:\"fondoTarjetaLogin\",className:\"card auth-card input-field\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"logo\",className:\"logo-login\",src:logo}),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",id:\"inputLogin\",placeholder:\"Ingrese DNI\",value:dni,onChange:function onChange(e){return setdni(e.target.value);}}),/*#__PURE__*/React.createElement(\"button\",{id:\"botonLogin\",className:\"btn waves-effect waves-light #64b5f6 red darken-1\",onClick:function onClick(){return PostData();}},\"Ingresar\"),/*#__PURE__*/React.createElement(\"h5\",{id:\"H5Register\"},/*#__PURE__*/React.createElement(Link,{id:\"linkRegister\",to:\"/login/admin\"},\"Ingresar como administrador\"),/*#__PURE__*/React.createElement(\"tr\",null),/*#__PURE__*/React.createElement(Link,{id:\"linkRegister\",to:\"/register\"},\"Registrate ac\\xE1\"))));};export default Login;","map":{"version":3,"sources":["/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/src/components/routes/Singin.js"],"names":["React","useState","useContext","Link","useHistory","userContext","M","logo","axios","Login","history","dni","setdni","dispatch","PostData","toast","html","classes","post","then","success","localStorage","setItem","data","nombre","apellido","headers","authorization","defaults","getItem","type","payload","console","log","push","catch","error","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, /*useEffect, */useContext } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { userContext } from \"../../App\"\nimport \"../../styles/Singin.css\";\nimport M from \"materialize-css\";\nimport logo from \"../../images/logo.png\"\nimport axios from \"axios\";\n\nconst Login = () => {\n  const history = useHistory();\n  const [dni, setdni] = useState(null);\n  const { /*state, */dispatch } = useContext(userContext);\n\n  const PostData = () => {\n    if (dni < 1000000) {\n      M.toast({ html: \"DNI Inválido\", classes: \"#c62828 red darken-3\" });\n    } else {\n      axios.post(\"https://exposicion-virtual.herokuapp.com/login\",\n        {\n          dni: dni\n        },\n      )\n        .then(success => {\n          localStorage.setItem('nombre', success.data.nombre);\n          localStorage.setItem('apellido', success.data.apellido);\n          localStorage.setItem('tokenValido', success.headers.authorization);\n          axios.defaults.headers['authorization'] = localStorage.getItem('tokenValido')\n          localStorage.setItem(\"user\", \"usuario\");\n          dispatch({ type: \"USER\", payload: \"user\" });\n          M.toast({\n            html: `Bienvenido ${localStorage.nombre}`,\n            classes: \"#388e3c green darken-2\",\n          });\n          console.log(\"success\", success.headers.authorization);\n          history.push(\"/\");\n        }\n        )\n        .catch(error => {\n          console.log(error);\n          M.toast({ html: \"datos invalidos o el usuario no existe\", classes: \"#c62828 red darken-3\" });\n        });\n    }\n  };\n\n  return (\n    <div className=\"mycard\">\n      <div id=\"fondoTarjetaLogin\" className=\"card auth-card input-field\">\n        <img alt=\"logo\" className=\"logo-login\" src={logo} />\n        <input\n          type=\"number\"\n          id='inputLogin'\n          placeholder=\"Ingrese DNI\"\n          value={dni}\n          onChange={(e) => setdni(e.target.value)}\n        />\n        <button\n          id=\"botonLogin\"\n          className=\"btn waves-effect waves-light #64b5f6 red darken-1\"\n          onClick={() => PostData()}\n        >\n          Ingresar\n        </button>\n        <h5 id=\"H5Register\">\n          <Link id=\"linkRegister\" to=\"/login/admin\">Ingresar como administrador</Link>\n          <tr />\n          <Link id=\"linkRegister\" to=\"/register\">Registrate acá</Link>\n        </h5>\n      </div>\n    </div>)\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}