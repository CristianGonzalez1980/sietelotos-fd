{"ast":null,"code":"import _slicedToArray from\"/home/cristian/Documentos/ProyectosGIT/exposicion-virtual-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import M from'materialize-css';import'../../styles/DeleteBanner.css';import uploadImage from\"../CloudImageUpload\";import{postearUpdateEntity}from'../AdminPanel/FetchFunctions';document.addEventListener('DOMContentLoaded',function(){var elems=document.querySelectorAll('.autocomplete');M.Autocomplete.init(elems,{});});var UpdateProductoForm=function UpdateProductoForm(props){var product=props.product;var _useState=useState(product.images),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useState3=useState(product.itemName),_useState4=_slicedToArray(_useState3,2),itemName=_useState4[0],setitemName=_useState4[1];var _useState5=useState(product.images),_useState6=_slicedToArray(_useState5,2),images=_useState6[0],setimages=_useState6[1];var _useState7=useState(product.description),_useState8=_slicedToArray(_useState7,2),description=_useState8[0],setdescription=_useState8[1];var _useState9=useState(product.stock),_useState10=_slicedToArray(_useState9,2),stock=_useState10[0],setstock=_useState10[1];var _useState11=useState(product.itemPrice),_useState12=_slicedToArray(_useState11,2),itemPrice=_useState12[0],setitemPrice=_useState12[1];var _useState13=useState(product.promotionalPrice),_useState14=_slicedToArray(_useState13,2),promotionalPrice=_useState14[0],setpromotionalPrice=_useState14[1];var _useState15=useState(product.longitud),_useState16=_slicedToArray(_useState15,2),longitud=_useState16[0],setlongitud=_useState16[1];var _useState17=useState(product.ancho),_useState18=_slicedToArray(_useState17,2),ancho=_useState18[0],setancho=_useState18[1];var _useState19=useState(product.alto),_useState20=_slicedToArray(_useState19,2),alto=_useState20[0],setalto=_useState20[1];var _useState21=useState(product.pesoGr),_useState22=_slicedToArray(_useState21,2),pesoGr=_useState22[0],setpesoGr=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),subir=_useState24[0],setSubir=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),postear=_useState26[0],setpostear=_useState26[1];var history=useHistory();useEffect(function(){if(postear){postearUpdate();}},[url,product]);var concatUrls=function concatUrls(urlOfImage){var newURl=[urlOfImage].concat(url);//foto mas reciente primero\nsetpostear(true);setUrl(newURl);};var agregarProducto=function agregarProducto(){if(subir){console.log(\"ENTRE AL SUBIR\");for(var index=0;index<images.length;index++){var image=images[index];uploadImage({image:image,fx:concatUrls});}}};var postearUpdate=function postearUpdate(){console.log(\"entreaPostearUpdate\");postearUpdateEntity({historyProp:history,entityClass:\"products\",entity:product,atributes:{\"idProveedor\":product.idProveedor,\"itemName\":itemName,\"description\":description,\"images\":url,\"stock\":stock,\"vendidos\":product.vendidos,\"itemPrice\":itemPrice,\"promotionalPrice\":promotionalPrice,\"longitud\":longitud,\"ancho\":ancho,\"alto\":alto,\"pesoGr\":pesoGr}});};var eliminarImagen=function eliminarImagen(item){var newUrls=url;var i=newUrls.indexOf(item);newUrls.splice(i,1);setUrl(newUrls);setpostear(true);};var nosePuedeEliminarImagen=function nosePuedeEliminarImagen(){return M.toast({html:\"No se puede borrar esta imagen, debe haber por lo menos una imagen por producto\",classes:\"#388e3c red darken-2\"});};var listOfImages=function listOfImages(){if(url){var list=url.map(function(elem){return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"col s1\",id:\"colCard\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\",id:\"cardDeleteUP\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-image\",id:\"imageUP\"},/*#__PURE__*/React.createElement(\"img\",{src:elem}),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){url.length===1?nosePuedeEliminarImagen():eliminarImagen(elem);},id:\"iconoDeleteUP\",className:\"btn-floating halfway-fab waves-effect waves-light red\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"delete\"))))));});return/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},list));}};return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"form\",{className:\"col s12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s6\"},console.log(product),/*#__PURE__*/React.createElement(\"input\",{id:\"ItemName\",onChange:function onChange(e){return setitemName(e.target.value);},type:\"text\",className:\"validate\",value:itemName}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",for:\"ItemName\"},\"Nombre del producto\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s6\"},/*#__PURE__*/React.createElement(\"input\",{id:\"description\",onChange:function onChange(e){return setdescription(e.target.value);},type:\"text\",className:\"validate\",value:description}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",for:\"description\"},\"Descripci\\xF3n\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s3\"},/*#__PURE__*/React.createElement(\"input\",{id:\"Stock\",type:\"number\",onChange:function onChange(e){return setstock(e.target.value>0?e.target.value:1);},className:\"validate\",value:stock}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",for:\"Stock\"},\"Stock\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s3\"},/*#__PURE__*/React.createElement(\"input\",{id:\"ItemPrice\",type:\"number\",onChange:function onChange(e){return setitemPrice(e.target.value);},className:\"validate\",value:itemPrice}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",for:\"ItemPrice\"},\"Precio\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s3\"},/*#__PURE__*/React.createElement(\"input\",{id:\"PromotionalPrice\",type:\"number\",onChange:function onChange(e){return setpromotionalPrice(e.target.value);},className:\"validate\",value:promotionalPrice}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",for:\"PromotionalPrice\"},\"Precio promocional\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",onChange:function onChange(e){return setlongitud(e.target.value>0?e.target.value:1);},className:\"validate\",value:longitud}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",for:\"PromotionalPrice\"},\"Longitud (cm)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",onChange:function onChange(e){return setancho(e.target.value>0?e.target.value:1);},className:\"validate\",value:ancho}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",for:\"PromotionalPrice\"},\"Ancho (cm)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",onChange:function onChange(e){return setalto(e.target.value>0?e.target.value:1);},className:\"validate\",value:alto}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",for:\"PromotionalPrice\"},\"Alto (cm)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",onChange:function onChange(e){return setpesoGr(e.target.value>0?e.target.value:1);},className:\"validate\",value:pesoGr}),/*#__PURE__*/React.createElement(\"label\",{className:\"active\",for:\"PromotionalPrice\"},\"Peso (gramos)\"))),/*#__PURE__*/React.createElement(\"form\",{action:\"#\"},/*#__PURE__*/React.createElement(\"div\",{className:\"file-field input-field\"},/*#__PURE__*/React.createElement(\"div\",{className:\"btn\",id:\"buttonUploadImages\"},/*#__PURE__*/React.createElement(\"span\",null,\"Cargar Imagen\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:function onChange(e){setimages(e.target.files);setSubir(true);},multiple:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"file-path-wrapper\"},/*#__PURE__*/React.createElement(\"input\",{className:\"file-path validate\",type:\"text\",value:typeof images==='string'?images:url})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s12\"},/*#__PURE__*/React.createElement(\"div\",null,listOfImages()),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){if(subir){agregarProducto();//setpostear(true)\n}else{postearUpdate();}},className:\"waves-effect waves-light red lighten-2 btn-large\",id:\"butonSubmit\"},\"Modificar Producto\")))));};export default UpdateProductoForm;","map":{"version":3,"sources":["/home/cristian/Documentos/ProyectosGIT/exposicion-virtual-frontend/src/components/AdminPanel/UpdateProductoForm.js"],"names":["React","useEffect","useState","useHistory","M","uploadImage","postearUpdateEntity","document","addEventListener","elems","querySelectorAll","Autocomplete","init","UpdateProductoForm","props","product","images","url","setUrl","itemName","setitemName","setimages","description","setdescription","stock","setstock","itemPrice","setitemPrice","promotionalPrice","setpromotionalPrice","longitud","setlongitud","ancho","setancho","alto","setalto","pesoGr","setpesoGr","subir","setSubir","postear","setpostear","history","postearUpdate","concatUrls","urlOfImage","newURl","concat","agregarProducto","console","log","index","length","image","fx","historyProp","entityClass","entity","atributes","idProveedor","vendidos","eliminarImagen","item","newUrls","i","indexOf","splice","nosePuedeEliminarImagen","toast","html","classes","listOfImages","list","map","elem","e","target","value","files"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport M from 'materialize-css'\nimport '../../styles/DeleteBanner.css'\nimport uploadImage from \"../CloudImageUpload\";\nimport { postearUpdateEntity } from '../AdminPanel/FetchFunctions'\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var elems = document.querySelectorAll('.autocomplete');\n  M.Autocomplete.init(elems, {});\n});\n\nconst UpdateProductoForm = (props) => {\n  const product = props.product\n  const [url, setUrl] = useState(product.images);\n  const [itemName, setitemName] = useState(product.itemName)\n  const [images, setimages] = useState(product.images)\n  const [description, setdescription] = useState(product.description)\n  const [stock, setstock] = useState(product.stock)\n  const [itemPrice, setitemPrice] = useState(product.itemPrice)\n  const [promotionalPrice, setpromotionalPrice] = useState(product.promotionalPrice)\n  const [longitud, setlongitud] = useState(product.longitud)\n  const [ancho, setancho] = useState(product.ancho)\n  const [alto, setalto] = useState(product.alto)\n  const [pesoGr, setpesoGr] = useState(product.pesoGr)\n  const [subir, setSubir] = useState(false)\n  const [postear, setpostear] = useState(false)\n  const history = useHistory()\n\n  useEffect(() => {\n    if (postear) {\n      postearUpdate();\n    }\n  }, [url, product]);\n\n  const concatUrls = (urlOfImage) => {\n    let newURl = [urlOfImage].concat(url)//foto mas reciente primero\n    setpostear(true);\n    setUrl(newURl);\n  }\n\n  const agregarProducto = () => {\n    if (subir) {\n      console.log(\"ENTRE AL SUBIR\")\n      for (let index = 0; index < images.length; index++) {\n        const image = images[index];\n        uploadImage({ image: image, fx: concatUrls });\n      }\n    }\n  };\n\n  const postearUpdate = () => {\n    console.log(\"entreaPostearUpdate\")\n    postearUpdateEntity({\n      historyProp: history, entityClass: \"products\", entity: product, atributes: {\n        \"idProveedor\": product.idProveedor,\n        \"itemName\": itemName,\n        \"description\": description,\n        \"images\": url,\n        \"stock\": stock,\n        \"vendidos\": product.vendidos,\n        \"itemPrice\": itemPrice,\n        \"promotionalPrice\": promotionalPrice,\n        \"longitud\": longitud,\n        \"ancho\": ancho,\n        \"alto\": alto,\n        \"pesoGr\": pesoGr\n      }\n    })\n  };\n\n  const eliminarImagen = (item) => {\n    let newUrls = url\n    var i = newUrls.indexOf(item);\n    newUrls.splice(i, 1);\n    setUrl(newUrls)\n    setpostear(true)\n  }\n  const nosePuedeEliminarImagen = () => {\n    return (\n      M.toast({\n        html: \"No se puede borrar esta imagen, debe haber por lo menos una imagen por producto\",\n        classes: \"#388e3c red darken-2\",\n      })\n    )\n  }\n\n  const listOfImages = () => {\n    if (url) {\n      const list = url.map((elem) => {\n        return (\n          <li>\n            <div className=\"col s1\" id='colCard'>\n              <div className=\"card\" id='cardDeleteUP'>\n                <div className=\"card-image\" id=\"imageUP\">\n                  <img src={elem} />\n                  <a onClick={() => {\n                    url.length === 1 ?\n                      nosePuedeEliminarImagen()\n                      :\n                      eliminarImagen(elem)\n                  }\n                  } id=\"iconoDeleteUP\" className=\"btn-floating halfway-fab waves-effect waves-light red\"><i className=\"material-icons\">delete</i></a>\n                </div>\n              </div>\n            </div>\n          </li>\n        )\n      })\n      return (\n        <ul>\n          <div className='row'>\n            {list}\n          </div>\n        </ul>\n      )\n    }\n  }\n\n  return (\n    <div className=\"row\">\n      <form className=\"col s12\">\n        <div className=\"row\">\n          <div className=\"input-field col s6\">\n            {console.log(product)}\n            <input id=\"ItemName\" onChange={(e) => setitemName(e.target.value)} type=\"text\" className=\"validate\" value={itemName} />\n            <label className=\"active\" for=\"ItemName\">Nombre del producto</label>\n          </div>\n          <div className=\"input-field col s6\">\n            <input id=\"description\" onChange={(e) => setdescription(e.target.value)} type=\"text\" className=\"validate\" value={description} />\n            <label className=\"active\" for=\"description\">Descripci√≥n</label>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"input-field col s3\">\n            <input id=\"Stock\" type=\"number\" onChange={(e) => setstock(e.target.value > 0 ? e.target.value : 1)} className=\"validate\" value={stock} />\n            <label className=\"active\" for=\"Stock\">Stock</label>\n          </div>\n          <div className=\"input-field col s3\">\n            <input id=\"ItemPrice\" type=\"number\" onChange={(e) => setitemPrice(e.target.value)} className=\"validate\" value={itemPrice} />\n            <label className=\"active\" for=\"ItemPrice\">Precio</label>\n          </div>\n          <div className=\"input-field col s3\">\n            <input id=\"PromotionalPrice\" type=\"number\" onChange={(e) => setpromotionalPrice(e.target.value)} className=\"validate\" value={promotionalPrice} />\n            <label className=\"active\" for=\"PromotionalPrice\">Precio promocional</label>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"input-field col s2\">\n            <input type=\"number\" onChange={(e) => setlongitud(e.target.value > 0 ? e.target.value : 1)} className=\"validate\" value={longitud} />\n            <label className=\"active\" for=\"PromotionalPrice\">Longitud (cm)</label>\n          </div>\n          <div className=\"input-field col s2\">\n            <input type=\"number\" onChange={(e) => setancho(e.target.value > 0 ? e.target.value : 1)} className=\"validate\" value={ancho} />\n            <label className=\"active\" for=\"PromotionalPrice\">Ancho (cm)</label>\n          </div>\n          <div className=\"input-field col s2\">\n            <input type=\"number\" onChange={(e) => setalto(e.target.value > 0 ? e.target.value : 1)} className=\"validate\" value={alto} />\n            <label className=\"active\" for=\"PromotionalPrice\">Alto (cm)</label>\n          </div>\n          <div className=\"input-field col s2\">\n            <input type=\"number\" onChange={(e) => setpesoGr(e.target.value > 0 ? e.target.value : 1)} className=\"validate\" value={pesoGr} />\n            <label className=\"active\" for=\"PromotionalPrice\">Peso (gramos)</label>\n          </div>\n        </div>\n        <form action=\"#\">\n          <div className=\"file-field input-field\">\n            <div className=\"btn\" id='buttonUploadImages'>\n              <span>Cargar Imagen</span>\n              <input type=\"file\" onChange={(e) => {\n                setimages(e.target.files)\n                setSubir(true)\n              }} multiple />\n            </div>\n            <div className=\"file-path-wrapper\">\n              <input className=\"file-path validate\" type=\"text\" value={typeof images === 'string' ? images : url} />\n            </div>\n          </div>\n        </form>\n        <div className=\"row\">\n          <div className=\"col s12\">\n            <div>\n              {listOfImages()}\n            </div>\n            <a onClick={() => {\n              if (subir) {\n                agregarProducto();\n                //setpostear(true)\n              } else {\n                postearUpdate()\n              }\n            }\n            }\n              className=\"waves-effect waves-light red lighten-2 btn-large\" id=\"butonSubmit\">Modificar Producto</a>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default UpdateProductoForm;\n"]},"metadata":{},"sourceType":"module"}