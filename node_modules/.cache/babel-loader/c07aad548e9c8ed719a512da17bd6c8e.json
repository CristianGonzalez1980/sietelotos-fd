{"ast":null,"code":"import _objectSpread from\"/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";//AGREGO UN PRODUCTO\nexport var ADD_PRODUCT='ADD_PRODUCT';//BORRO UN PRODUCTO\nexport var REMOVE_PRODUCT='REMOVE_PRODUCT';//EMILINA EL PRODUCTO\nexport var DELETE_PRODUCT='DELETE_PRODUCT';/***TOMA COMO PARAMETRO UN PRODUCTO Y UN ESTADO\n1) GENERO MI CARRITO ACTUALIZADO \n2) BUSCO EL INDEX DE MI CARRITO\n3)PREGUNTA SI EL INDEX NO EXITE {ACTUALIZO EL UPDATEDCART HACIENDO PUSH EN ESA LISTA}\n  SI EXISTE GENERA UN UPDATEDITEM LE SUMA EL QUANTITY EN 1 Y LUEGO ACTUALIZA EL UPDATEDCART\n4) RETORNA EL ESTADO PREVIO Y SETEA EL UPDATEDCART EN EL CART\n***/var addProductToCart=function addProductToCart(product,state){var updatedCart=_toConsumableArray(state.cart);var updatedItemIndex=updatedCart.findIndex(function(item){return item.id===product.id;});if(updatedItemIndex<0){updatedCart.push(_objectSpread(_objectSpread({},product),{},{quantity:1}));}else{var updatedItem=_objectSpread({},updatedCart[updatedItemIndex]);updatedItem.quantity++;updatedCart[updatedItemIndex]=updatedItem;}localStorage.setItem('cart',JSON.stringify(updatedCart));return _objectSpread(_objectSpread({},state),{},{cart:updatedCart});};/***TOMA COMO PARAMETRO UN ID DE PRODUCTO Y UN ESTADO\n1) GENERO MI CARRITO ACTUALIZADO \n2) BUSCO EL INDEX DE MI CARRITO\n3)GENERA UN UPDATEDITEM, LE RESTA EL QUANTITY EN 1 Y LUEGO ACTUALIZA EL UPDATEDCART\n4) PREGUNTA SI LA QUANTITY ES 0 LO BORRA CON SPLICE\n   SINO ACTUALIZA EL UPDATEDCART\n5) RETORNA EL ESTADO PREVIO Y SETEA EL UPDATEDCART EN EL CART\n***/var removeProductFromCart=function removeProductFromCart(productId,state){//console.log('Removing product with id: ' + productId);\nvar updatedCart=_toConsumableArray(state.cart);var updatedItemIndex=updatedCart.findIndex(function(item){return item.id===productId;});var updatedItem=_objectSpread({},updatedCart[updatedItemIndex]);updatedItem.quantity--;if(!updatedItem.quantity<=0){updatedCart[updatedItemIndex]=updatedItem;//console.log(updatedCart)\n//console.log(updatedItem)\n}localStorage.setItem('cart',JSON.stringify(updatedCart));return _objectSpread(_objectSpread({},state),{},{cart:updatedCart});};var deleteProductFromCart=function deleteProductFromCart(productId,state){console.log('Removing product with id: '+productId);var updatedCart=_toConsumableArray(state.cart);var updatedItemIndex=updatedCart.findIndex(function(item){return item.id===productId;});updatedCart.splice(updatedItemIndex,1);localStorage.setItem('cart',JSON.stringify(updatedCart));return _objectSpread(_objectSpread({},state),{},{cart:updatedCart});};/**\n * SETEA EL REDUCER\n * @param {*} state \n * @param {*} action \n */export var shopReducer=function shopReducer(state,action){switch(action.type){case ADD_PRODUCT:return addProductToCart(action.product,state);case REMOVE_PRODUCT:return removeProductFromCart(action.productId,state);case DELETE_PRODUCT:return deleteProductFromCart(action.productId,state);default:return state;}};","map":{"version":3,"sources":["/home/cristian/Documentos/ProyectosGIT/exposicionVirtualFrontend/src/components/context/reducers.js"],"names":["ADD_PRODUCT","REMOVE_PRODUCT","DELETE_PRODUCT","addProductToCart","product","state","updatedCart","cart","updatedItemIndex","findIndex","item","id","push","quantity","updatedItem","localStorage","setItem","JSON","stringify","removeProductFromCart","productId","deleteProductFromCart","console","log","splice","shopReducer","action","type"],"mappings":"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","sourcesContent":["//AGREGO UN PRODUCTO\nexport const ADD_PRODUCT = 'ADD_PRODUCT';\n\n//BORRO UN PRODUCTO\nexport const REMOVE_PRODUCT = 'REMOVE_PRODUCT';\n\n//EMILINA EL PRODUCTO\nexport const DELETE_PRODUCT = 'DELETE_PRODUCT';\n\n/***TOMA COMO PARAMETRO UN PRODUCTO Y UN ESTADO\n1) GENERO MI CARRITO ACTUALIZADO \n2) BUSCO EL INDEX DE MI CARRITO\n3)PREGUNTA SI EL INDEX NO EXITE {ACTUALIZO EL UPDATEDCART HACIENDO PUSH EN ESA LISTA}\n  SI EXISTE GENERA UN UPDATEDITEM LE SUMA EL QUANTITY EN 1 Y LUEGO ACTUALIZA EL UPDATEDCART\n4) RETORNA EL ESTADO PREVIO Y SETEA EL UPDATEDCART EN EL CART\n***/\nconst addProductToCart = (product, state) => {\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(\n    item => item.id === product.id\n  );\n\n  if (updatedItemIndex < 0) {\n    updatedCart.push({ ...product, quantity: 1 });\n  } else {\n    const updatedItem = {\n      ...updatedCart[updatedItemIndex]\n    };\n    updatedItem.quantity++;\n    updatedCart[updatedItemIndex] = updatedItem;\n  }\n  localStorage.setItem('cart', JSON.stringify(updatedCart))\n  return { ...state, cart: updatedCart };\n};\n\n/***TOMA COMO PARAMETRO UN ID DE PRODUCTO Y UN ESTADO\n1) GENERO MI CARRITO ACTUALIZADO \n2) BUSCO EL INDEX DE MI CARRITO\n3)GENERA UN UPDATEDITEM, LE RESTA EL QUANTITY EN 1 Y LUEGO ACTUALIZA EL UPDATEDCART\n4) PREGUNTA SI LA QUANTITY ES 0 LO BORRA CON SPLICE\n   SINO ACTUALIZA EL UPDATEDCART\n5) RETORNA EL ESTADO PREVIO Y SETEA EL UPDATEDCART EN EL CART\n***/\nconst removeProductFromCart = (productId, state) => {\n  //console.log('Removing product with id: ' + productId);\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => item.id === productId);\n\n  const updatedItem = {\n    ...updatedCart[updatedItemIndex]\n  };\n  updatedItem.quantity--;\n  if (! updatedItem.quantity <= 0) {\n    updatedCart[updatedItemIndex] = updatedItem;\n    \n    //console.log(updatedCart)\n    //console.log(updatedItem)\n  } \n  localStorage.setItem('cart', JSON.stringify(updatedCart))\n  return { ...state, cart: updatedCart };\n};\n\nconst deleteProductFromCart = (productId, state) => {\n  console.log('Removing product with id: ' + productId);\n  const updatedCart = [...state.cart];\n  const updatedItemIndex = updatedCart.findIndex(item => item.id === productId);\n\n    updatedCart.splice(updatedItemIndex, 1);\n    localStorage.setItem('cart', JSON.stringify(updatedCart))\n  return { ...state, cart: updatedCart };\n};\n\n/**\n * SETEA EL REDUCER\n * @param {*} state \n * @param {*} action \n */\nexport const shopReducer = (state, action) => {\n  switch (action.type) {\n    case ADD_PRODUCT:\n      return addProductToCart(action.product, state);\n    case REMOVE_PRODUCT:\n      return removeProductFromCart(action.productId, state);\n    case DELETE_PRODUCT:\n      return deleteProductFromCart(action.productId, state);\n    default:\n      return state;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}